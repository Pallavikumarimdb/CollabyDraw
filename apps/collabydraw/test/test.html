<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter Color Test</title>
    <style>
        :root {
            --theme-filter: invert(93%) hue-rotate(180deg);
        }

        .box {
            width: 100px;
            height: 100px;
            display: inline-block;
            margin: 10px;
            border: 2px solid black;
        }

        .filtered {
            filter: var(--theme-filter);
        }
    </style>
</head>

<body>
    <h2>Filtered Colors</h2>

    <!-- StrokeFill Colors -->
    <div class="box filtered" style="background: #1e1e1e;" data-color="#1e1e1e"></div>
    <div class="box filtered" style="background: #e03131;" data-color="#e03131"></div>
    <div class="box filtered" style="background: #2f9e44;" data-color="#2f9e44"></div>
    <div class="box filtered" style="background: #1971c2;" data-color="#1971c2"></div>
    <div class="box filtered" style="background: #f08c00;" data-color="#f08c00"></div>

    <!-- BgFill Colors -->
    <div class="box filtered" style="background: #00000000;" data-color="#00000000"></div>
    <div class="box filtered" style="background: #ffc9c9;" data-color="#ffc9c9"></div>
    <div class="box filtered" style="background: #b2f2bb;" data-color="#b2f2bb"></div>
    <div class="box filtered" style="background: #a5d8ff;" data-color="#a5d8ff"></div>
    <div class="box filtered" style="background: #ffec99;" data-color="#ffec99"></div>

    <script>
        function getFilteredColor(element) {
            const canvas = document.createElement("canvas");
            const ctx = canvas.getContext("2d");
            canvas.width = 100;
            canvas.height = 100;

            // Apply the filter
            ctx.filter = getComputedStyle(element).filter;

            // Draw the original color
            ctx.fillStyle = element.dataset.color;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Get pixel color
            const pixel = ctx.getImageData(50, 50, 1, 1).data;
            return rgbToHex(pixel[0], pixel[1], pixel[2], pixel[3]);
        }

        function rgbToHex(r, g, b, a = 255) {
            if (a === 0) return "#00000000"; // Transparent
            return `#${((1 << 24) | (r << 16) | (g << 8) | b).toString(16).slice(1)}`;
        }

        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".filtered").forEach((box) => {
                const originalColor = box.dataset.color;
                const filteredColor = getFilteredColor(box);
                console.log(`Original: ${originalColor} â†’ Filtered: ${filteredColor}`);
            });
        });
    </script>
</body>

</html>